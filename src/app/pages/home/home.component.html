<nz-tabset nzCentered>
  <nz-tab nzTitle="Dashboard">
    <div class="example-board">
      <div class="example-container">
        <h2>To do</h2>
        <div
          cdkDropList
          #todoList="cdkDropList"
          [cdkDropListData]="todo"
          [cdkDropListConnectedTo]="[currentList, completedList]"
          class="example-list"
          (cdkDropListDropped)="drop($event)">
          <div class="example-box" *ngFor="let task of todo" cdkDrag>
            <nz-card nzTitle="{{ task.title }}" nzExtra="ID: {{ task.id }}">
              <p>Description: {{ task.description }}</p>
              <p>Time: {{ task.time }}</p>
              <p>Created At: {{ task.created_at }}</p>
              <p>Assigned To: {{ task.assigned_to }}</p>
            </nz-card>
          </div>
        </div>
      </div>

      <div class="example-container">
        <h2>Current</h2>
        <div
          cdkDropList
          #currentList="cdkDropList"
          [cdkDropListData]="current"
          [cdkDropListConnectedTo]="[todoList, completedList]"
          class="example-list"
          (cdkDropListDropped)="drop($event)">
          <div class="example-box" *ngFor="let task of current" cdkDrag>
            <nz-card nzTitle="{{ task.title }}" nzExtra="ID: {{ task.id }}">
              <p>Description: {{ task.description }}</p>
              <p>Time: {{ task.time }}</p>
              <p>Created At: {{ task.created_at }}"></p>
              <p>Assigned To: {{ task.assigned_to }}"></p>
            </nz-card>
          </div>
        </div>
      </div>

      <div class="example-container">
        <h2>Completed</h2>
        <div
          cdkDropList
          #completedList="cdkDropList"
          [cdkDropListData]="completed"
          [cdkDropListConnectedTo]="[todoList, currentList]"
          class="example-list"
          (cdkDropListDropped)="drop($event)">
          <div class="example-box" *ngFor="let task of completed" cdkDrag>
            <nz-card nzTitle="{{ task.title }}" nzExtra="ID: {{ task.id }}">
              <p>Description: {{ task.description }}</p>
              <p>Time: {{ task.time }}</p>
              <p>Created At: {{ task.created_at }}"></p>
              <p>Assigned To: {{ task.assigned_to }}"></p>
            </nz-card>
          </div>
        </div>
      </div>
    </div>
  </nz-tab>
  <nz-tab nzTitle="Tasks">
    <button nz-button style="margin-bottom: 10px; margin-right: 10px" nzType="primary" (click)="addTask()">Add Task</button>
    <button nz-button style="margin-bottom: 10px" nzType="default" (click)="addContact()">Add Contact</button>
    <nz-table #basicTable [nzData]="tasks" nzBordered>
      <thead>
      <tr>
        <th >Title</th>
        <th >Description</th>
        <th >Time</th>
        <th >Created At</th>
        <th >Assigned To</th>
        <th>Progress</th>
        <th >Status</th>
        <th >Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let task of basicTable.data">
        <td>{{ task.title }}</td>
        <td>{{ task.description }}</td>
        <td>{{ task.time }}</td>
        <td>{{ task.created_at }}</td>
        <td>{{ task.assigned_to }}</td>
        <td>
          <nz-select  [(ngModel)]="value" nzPlaceHolder="Select a Percent">
            <nz-option *ngFor="let progress of progressSteps" [nzValue]="progress" [nzLabel]="progress +'%'"></nz-option>
          </nz-select>
        </td>
        <td [ngClass]="{'status-todo': task.status === 'Todo', 'status-current': task.status === 'Current', 'status-completed': task.status === 'Completed'}">
          {{ task.status }}
        </td>
        <td>
          <button style="margin-right: 10px" nz-button nzType="primary" (click)="openEditModal(task)">
            <span nz-icon nzType="edit" nzTheme="outline"></span>
            Edit
          </button>
          <button nz-button nzType="primary" (click)="confirmDelete(task)" nzDanger>
            <span nz-icon nzType="delete" nzTheme="outline" ></span>
            delete
          </button>

        </td>
      </tr>
      </tbody>
    </nz-table>
  </nz-tab>
</nz-tabset>
<nz-modal [(nzVisible)]="isModalVisible" nzTitle="Edit Task" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()">
  <ng-container *nzModalContent>
  <form nz-form [formGroup]="taskForm" (ngSubmit)="handleOk()">
    <nz-form-item>
      <nz-form-label><label for="title">Title</label></nz-form-label>
      <nz-form-control>
        <input nz-input id="title" formControlName="title" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label><label for="description">Description</label></nz-form-label>
      <nz-form-control>
        <input nz-input id="description" formControlName="description" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item >
      <nz-form-label ><label for="time">Time</label></nz-form-label>
      <nz-form-control >
        <input nz-input id="time" formControlName="time" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label ><label for="assigned_to">Assigned To</label></nz-form-label>
      <nz-select id="assigned_to" formControlName="assigned_to" nzPlaceHolder="Select a person">
        <nz-option *ngFor="let person of people" [nzValue]="person" [nzLabel]="person"></nz-option>
      </nz-select>
    </nz-form-item>
  </form>
  </ng-container>
</nz-modal>
<nz-modal [(nzVisible)]="isContactVisible" nzTitle="Contact" (nzOnCancel)="handleCancelContact()" (nzOnOk)="handleOkContact()">
  <ng-container *nzModalContent>
  <form nz-form [formGroup]="contact" (ngSubmit)="handleCancelContact()">
    <nz-form-item>
      <nz-form-label><label for="title">Title</label></nz-form-label>
      <nz-form-control>
        <input nz-input  formControlName="title" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label><label for="description">Description</label></nz-form-label>
      <nz-form-control>
        <input nz-input formControlName="description" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item >
      <nz-form-label ><label for="time">ticket</label></nz-form-label>
      <nz-form-control >
        <nz-select formControlName="ticket"  nzPlaceHolder="Select a  ticket">
          <nz-option *ngFor="let progress of tasks" [nzValue]="progress.id" [nzLabel]="progress.title"></nz-option>
        </nz-select>
      </nz-form-control>
    </nz-form-item>
  </form>
  </ng-container>
</nz-modal>
